
<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Meu Flipbook</title>
  <style>
    html, body { height:100%; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#111; color:#eee; }
    header { padding:12px 16px; font-weight:600; }
    #flipbook-container { width:100vw; height:calc(100vh - 56px); display:flex; align-items:center; justify-content:center; }
    #flipbook { width:min(92vw, 1200px); height:min(84vh, 800px); background:#222; }
    .pf-controls { position:fixed; bottom:16px; left:50%; transform:translateX(-50%); display:flex; gap:12px; }
    .pf-btn { padding:10px 14px; border-radius:10px; background:#1f1f1f; color:#eee; border:1px solid #333; cursor:pointer }
    .pf-counter { font-size:14px; opacity:.8; align-self:center }
    img { background:#fff; }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/page-flip/dist/css/page-flip.min.css">
</head>
<body>
  <header>Meu Flipbook</header>
  <div id="flipbook-container"><div id="flipbook"></div></div>
  <div class="pf-controls">
    <button id="prev" class="pf-btn">◀︎ Anterior</button>
    <div id="counter" class="pf-counter"></div>
    <button id="next" class="pf-btn">Próxima ▶︎</button>
  </div>

  <script src="https://unpkg.com/page-flip/dist/js/page-flip.browser.min.js"></script>
  <script>
    // Agora é JSON puro, gerado em Python
    const images = ["pages/page_001.jpg", "pages/page_002.jpg", "pages/page_003.jpg", "pages/page_004.jpg"];

    const bookEl = document.getElementById('flipbook');
    const pageFlip = new St.PageFlip(bookEl, {
      width: 800, height: 600, size: "stretch", showCover: false,
      maxShadowOpacity: 0.2, mobileScrollSupport: true, usePortrait: true, autoSize: true
    });

    const pages = images.map(src => {
      const d = document.createElement('div');
      d.className = 'page';
      d.innerHTML = '<img src="'+src+'" alt="page" style="width:100%;height:100%;object-fit:contain;">';
      return d;
    });
    pageFlip.loadFromHTML(pages);

    const prev = document.getElementById('prev');
    const next = document.getElementById('next');
    const counter = document.getElementById('counter');

    function updateCounter() {
      const s = pageFlip.getState();
      counter.textContent = 'Página ' + (s.page + 1) + ' de ' + s.pages;
    }
    pageFlip.on('flip', updateCounter);
    prev.onclick = () => pageFlip.flipPrev();
    next.onclick = () => pageFlip.flipNext();
    updateCounter();
    window.addEventListener('resize', () => pageFlip.update());
  </script>
</body>

</html>
